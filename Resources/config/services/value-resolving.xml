<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd"
>
    <services>

        <service id="addiks_rdm.value_resolver" class="Addiks\RDMBundle\ValueResolver\ValueResolverAggregate">
            <argument type="collection">
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\ServiceMapping"
                    id="addiks_rdm.value_resolver.service"
                />
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\ChoiceMapping"
                    id="addiks_rdm.value_resolver.choice"
                />
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\ObjectMapping"
                    id="addiks_rdm.value_resolver.object"
                />
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\ArrayMapping"
                    id="addiks_rdm.value_resolver.array"
                />
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\ListMapping"
                    id="addiks_rdm.value_resolver.list"
                />
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\FieldMapping"
                    id="addiks_rdm.value_resolver.field"
                />
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\NullMapping"
                    id="addiks_rdm.value_resolver.null"
                />
                <argument
                    type="service"
                    key="Addiks\RDMBundle\Mapping\NullableMapping"
                    id="addiks_rdm.value_resolver.nullable"
                />
            </argument>
        </service>

        <service
            id="addiks_rdm.value_resolver.lazy_load_proxy"
            class="Addiks\RDMBundle\ValueResolver\ValueResolverLazyLoadProxy"
        >
            <argument type="service" id="service_container" />
            <argument>addiks_rdm.value_resolver</argument>
        </service>

        <service id="addiks_rdm.value_resolver.service" class="Addiks\RDMBundle\ValueResolver\ServiceValueResolver">
            <argument type="service" id="service_container" />
        </service>

        <service id="addiks_rdm.value_resolver.choice" class="Addiks\RDMBundle\ValueResolver\ChoiceValueResolver">
            <argument type="service" id="addiks_rdm.value_resolver.lazy_load_proxy" />
        </service>

        <service id="addiks_rdm.value_resolver.object" class="Addiks\RDMBundle\ValueResolver\ObjectValueResolver">
            <argument type="service" id="service_container" />
            <argument type="service" id="addiks_rdm.value_resolver.lazy_load_proxy" />
            <argument type="service" id="addiks_rdm.value_resolver.call_definition_executer" />
        </service>

        <service id="addiks_rdm.value_resolver.array" class="Addiks\RDMBundle\ValueResolver\ArrayValueResolver">
            <argument type="service" id="addiks_rdm.value_resolver.lazy_load_proxy" />
        </service>

        <service id="addiks_rdm.value_resolver.list" class="Addiks\RDMBundle\ValueResolver\ListValueResolver">
            <argument type="service" id="addiks_rdm.value_resolver.lazy_load_proxy" />
        </service>

        <service id="addiks_rdm.value_resolver.field" class="Addiks\RDMBundle\ValueResolver\FieldValueResolver">
        </service>

        <service id="addiks_rdm.value_resolver.null" class="Addiks\RDMBundle\ValueResolver\NullValueResolver">
        </service>

        <service id="addiks_rdm.value_resolver.nullable" class="Addiks\RDMBundle\ValueResolver\NullableValueResolver">
            <argument type="service" id="addiks_rdm.value_resolver.lazy_load_proxy" />
        </service>

        <service
            id="addiks_rdm.value_resolver.call_definition_executer"
            class="Addiks\RDMBundle\ValueResolver\CallDefinitionExecuter"
        >
            <argument type="service" id="service_container" />
            <argument type="service" id="addiks_rdm.value_resolver.lazy_load_proxy" />
        </service>

    </services>
</container>
